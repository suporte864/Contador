<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Contador de Dias</title>

<style>
/* Reset */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: Arial, sans-serif;
}

/* Área principal */
body {
    width: 624px;
    height: 312px;
    overflow: hidden;
}

/* Container */
.container {
    position: relative;
    width: 624px;
    height: 312px;
}

/* Vídeo */
video {
    position: absolute;
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Camada escura */
.overlay {
    position: absolute;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.55);
}

/* Conteúdo */
.content {
    position: relative;
    z-index: 2;
    color: white;
    width: 100%;
    height: 100%;

    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
}

/* Título */
.title {
    font-size: 26px;
    font-weight: bold;
    margin-bottom: 5px;
}

/* Número */
.counter {
    font-size: 60px;
    font-weight: bold;
    color: #00ff99;
    margin-bottom: 5px;
}

/* Informações */
.info {
    font-size: 13px;
    margin: 2px 0;
}

/* Área dos botões */
.buttons {
    display: flex;
    gap: 8px;
    margin-top: 8px;
}

/* Botões */
button {
    padding: 5px 12px;
    border: none;
    border-radius: 5px;
    background: #00ff99;
    color: black;
    font-weight: bold;
    cursor: pointer;
    font-size: 12px;
}

button:hover {
    background: #00cc7a;
}

/* Input data */
input[type="date"] {
    padding: 4px;
    border-radius: 5px;
    border: none;
    font-size: 12px;
}
</style>
</head>

<body>

<div class="container">

    <!-- Vídeo -->
    <video autoplay muted loop>
        <source src="video4.mp4" type="video/mp4">
    </video>

    <!-- Escurecer fundo -->
    <div class="overlay"></div>

    <!-- Conteúdo -->
    <div class="content">

        <div class="title">Dias sem Acidentes</div>

        <div class="counter" id="dias">0</div>

        <div class="info" id="data"></div>
        <div class="info" id="hora"></div>
        <div class="info" id="recorde"></div>

        <!-- Área de botões -->
        <div class="buttons">

            <input type="date" id="dataInicio">

            <button onclick="definirData()">
                Definir Início
            </button>

            <button onclick="reiniciar()">
                Reiniciar
            </button>

        </div>

    </div>

</div>

<script>

// Data padrão
let dataInicial = localStorage.getItem("dataInicial");

if (!dataInicial) {
    dataInicial = "2023-12-10";
    localStorage.setItem("dataInicial", dataInicial);
}

// Coloca a data no input
document.getElementById("dataInicio").value = dataInicial;

// Calcular dias
function calcularDias() {

    const inicio = new Date(dataInicial);
    const hoje = new Date();

    inicio.setHours(0,0,0,0);
    hoje.setHours(0,0,0,0);

    const diff = hoje - inicio;
    const dias = Math.floor(diff / (1000 * 60 * 60 * 24));

    document.getElementById("dias").innerText = dias;

    // Recorde
    let recorde = localStorage.getItem("recorde");

    if (!recorde || dias > recorde) {
        recorde = dias;
        localStorage.setItem("recorde", recorde);
    }

    document.getElementById("recorde").innerText =
        "Recorde: " + recorde + " dias";
}

// Atualizar data
function atualizarData() {

    const hoje = new Date();

    const data = hoje.toLocaleDateString("pt-BR", {
        timeZone: "America/Sao_Paulo"
    });

    document.getElementById("data").innerText =
        "Data: " + data;
}

// Atualizar hora
function atualizarHora() {

    const agora = new Date();

    const hora = agora.toLocaleTimeString("pt-BR", {
        timeZone: "America/Sao_Paulo"
    });

    document.getElementById("hora").innerText =
        "Hora: " + hora;
}

// Definir data manual
function definirData() {

    const novaData = document.getElementById("dataInicio").value;

    if (!novaData) {
        alert("Selecione uma data.");
        return;
    }

    dataInicial = novaData;

    localStorage.setItem("dataInicial", dataInicial);

    calcularDias();
}

// Reiniciar = hoje
function reiniciar() {

    if (confirm("Deseja reiniciar para hoje?")) {

        const hoje = new Date();

        const ano = hoje.getFullYear();
        const mes = String(hoje.getMonth()+1).padStart(2,"0");
        const dia = String(hoje.getDate()).padStart(2,"0");

        dataInicial = `${ano}-${mes}-${dia}`;

        localStorage.setItem("dataInicial", dataInicial);

        document.getElementById("dataInicio").value = dataInicial;

        calcularDias();
    }
}

// Inicialização
calcularDias();
atualizarData();
atualizarHora();

setInterval(atualizarHora, 1000);
setInterval(calcularDias, 60000);

</script>

</body>
</html>
