<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">

<!-- Força resolução correta na TB10 -->
<meta name="viewport" content="width=624, height=312, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Dias sem Acidentes</title>

<style>

/* RESET TOTAL */
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family: Arial, Helvetica, sans-serif;
}

html, body{
    width:624px;
    height:312px;
    overflow:hidden;
    background:black;
}

/* PAINEL */
.painel{
    position:relative;
    width:624px;
    height:312px;
    overflow:hidden;
}

/* VIDEO */
video{
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    object-fit:cover;
}

/* OVERLAY LEVE (remove se quiser) */
.overlay{
    position:absolute;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.25);
}

/* CONTEUDO */
.conteudo{
    position:absolute;
    inset:0;
    z-index:2;

    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    text-align:center;

    color:#003366;
}

/* TEXTO */
.titulo{
    font-size:30px;
    font-weight:bold;
}

.numero{
    font-size:70px;
    font-weight:bold;
    margin:4px 0;
}

.info{
    font-size:16px;
    margin:1px 0;
}

/* CONTROLES (FORA DA TELA LED) */
.controles{
    display:none; /* TB10 não usa */
}

</style>
</head>

<body>

<div class="painel">

    <video autoplay muted loop playsinline>
        <source src="fundo.mp4" type="video/mp4">
    </video>

    <div class="overlay"></div>

    <div class="conteudo">

        <div class="titulo">Dias sem Acidentes</div>

        <div class="numero" id="dias">0</div>

        <div class="info" id="data"></div>
        <div class="info" id="hora"></div>
        <div class="info" id="recorde"></div>

    </div>

</div>

<script>

/* DATA INICIAL */
let dataInicial = localStorage.getItem("dataInicial");

if(!dataInicial){
    dataInicial = "2023-12-10";
    localStorage.setItem("dataInicial", dataInicial);
}

/* FUNÇÃO DATA SP */
function agoraSP(){

    const agora = new Date();

    return new Date(
        agora.toLocaleString("pt-BR",{
            timeZone:"America/Sao_Paulo"
        })
    );
}

/* CALCULAR DIAS */
function calcularDias(){

    const inicio = new Date(dataInicial+"T00:00:00");

    const hoje = agoraSP();

    inicio.setHours(0,0,0,0);
    hoje.setHours(0,0,0,0);

    const diff = hoje.getTime() - inicio.getTime();

    const dias = Math.max(0, Math.floor(diff / 86400000));

    document.getElementById("dias").innerText = dias;

    /* RECORDE */
    let recorde = localStorage.getItem("recorde");

    if(!recorde){
        recorde = dias;
    }

    if(dias > recorde){
        recorde = dias;
        localStorage.setItem("recorde", recorde);
    }

    document.getElementById("recorde").innerText =
        "Recorde: " + recorde + " dias";
}

/* DATA */
function atualizarData(){

    const hoje = agoraSP();

    const data = hoje.toLocaleDateString("pt-BR");

    document.getElementById("data").innerText =
        "Data: " + data;
}

/* HORA */
function atualizarHora(){

    const hoje = agoraSP();

    const hora = hoje.toLocaleTimeString("pt-BR",{
        hour12:false
    });

    document.getElementById("hora").innerText =
        "Hora: " + hora;
}

/* INICIAL */
function iniciar(){

    calcularDias();
    atualizarData();
    atualizarHora();

    setInterval(atualizarHora,1000);
    setInterval(calcularDias,60000);
}

iniciar();

</script>

</body>
</html>
